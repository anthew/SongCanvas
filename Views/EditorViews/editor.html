<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Konva Canvas Library -->
    <script src="https://unpkg.com/konva@9.2.3/konva.min.js"></script>

    <!-- Test gif images with gifler -->
    <script src="https://unpkg.com/gifler@0.1.0/gifler.min.js"></script>

    <!-- CSS stuff -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

    <!-- Google font API -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Google font for the heading -->
    <link href="https://fonts.googleapis.com/css2?family=Concert+One&family=Hubballi&family=Josefin+Sans:ital,wght@1,200&family=Kaisei+Decol:wght@500&family=Kalam:wght@300;700&family=Oswald&display=swap" rel="stylesheet">
    
    <!-- Uncomment line 15 for node -->
    <link rel="stylesheet" href="/EditorViews/editor.css" />

    <!-- CSS stuff -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

    <!-- Java Script stuff-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    

    <!-- Dropdowns, Popovers, Tolltips -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <!-- JS files -->
    <script type="module" src="/EditorController.mjs"></script>
    <!-- <script type="module" src="/EditorManager.mjs"></script> -->

    <!-- Added this for the Ajax server calls -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <!-- Tab logo -->
<!-- Path to file-->    
    <link rel="icon" href="/mic.png">
    <title>Editor Page</title>
</head>
<body>
    <div class="editor">
        <div class="bootstrap-table">
            <div class="headers-tab">
                <table class="table table-borderless" style="width: 10%;">
                    <thead>
                        <!-- clicking options -->
                        <tr> 
                            <th scope="col">
                                <div class="dropdown">
                                    <button class="btn" type="button" data-toggle="dropdown">File
                                    <span class="caret"></span></button>
                                    <ul class="dropdown-menu">
                                      <li><a href="#">New</a></li>
                                      <li><a href="#">Delete Project</a></li>
                                      <li><a href="#">Open/Load Existing Project</a></li>
                                      <li><a href="#">Open Project in New Window</a></li>
                                      <li><a href="#">Open Project in This Window</a></li>
                                      <li><a href="#">Make Copy</a></li>
                                      <li><a href="#" id="saveToDB_Button">Save</a></li>
                                      <li><a href="#">Autosave</a></li>
                                    </ul>
                                </div>
                            </th>

                            <th id="edit" scope="col">
                                <div class="dropdown">
                                    <button class="btn" type="button" data-toggle="dropdown">Edit
                                    <span class="caret"></span></button>
                                    <ul class="dropdown-menu">
                                        <li><a href="#">Change Title</a></li>
                                        <li><a href="#">Undo</a></li>
                                        <li><a href="#">Redo</a></li>
                                        <li><a href="#">Discard Changes</a></li>
                                    </ul>
                                <!-- </div> -->
                            </th>
                            
                            <th id="view" scope="col"><div class="dropdown">
                                <button class="btn" type="button" data-toggle="dropdown">View
                                <span class="caret"></span></button>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Display Hierarchy</a></li>
                                    <li><a href="#">Display Drag and Drop Option</a></li>
                                    <li><a href="#">Hide or Show Timeline</a></li>
                                    <li><a id="fullScreen">Fullscreen</a></li>
                                    <li><a href="#">Change Theme</a></li>
                                    <hr>
                                    <li><a id="playVideo">Play Video</a></li>
                                    <li><a id="pauseVideo">Pause Video</a></li>
                                    <li><a id="restartVideo">Restart Video</a></li>
                                </ul>
                            <!-- </div> -->
                        </th>
                        
                        </tr>
                    </thead>
                </table>
            </div>

              <div class="context-table">
                  <table class="table table-white">
                      <tbody>
                          <tr>
                              <!-- <th scope="row">1</th> -->

                              <!-- Hierarchy Column -->
                                  <td style="background-color: lightslategray; width: 15%;">
                                      <!-- Hierarchy -->
                                      <div class="accordion" id="accordionExample" style="width: 12rem;">
                                          
                                          <!-- Heading one for the logo tab in the hierarchy -->
                                          <div class="card">
                                            <div class="card-header" id="headingOne">
                                              <h5 class="mb-0">
                                                <button class="btn btn-link btn-sm" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                                  Logo
                                                </button>
                                                <input type="image" src="/EditorMedia/Plus.png" width="20" height="20" data-bs-toggle="modal" data-bs-target="#logoModal" id="logoPlusButton">
                                              </h5>
                                              <div class="modal fade" id="logoModal" tabindex="-1" aria-labelledby="logoModalLabel" aria-hidden="true">
                                                <div class="modal-dialog modal-sm">
                                                  <div class="modal-content">
                                                      <div class="modal-header">
                                                          <h5 class="modal-title" id="logoModalLabel">Add Properties of Logo</h5>
                                                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                      </div>
                                                      
                                                      <!-- add for the input -->
                                                      <!-- wait so this modal is properties? -->
                                                      <div class="modal-body"> 
                                                        <!-- <form name="properties" id="prop" action="#" onsubmit="createPolygon()"> -->
                                                          <!-- <button class="upload">
                                                            Upload Image
                                                          </button> -->
                                                          
                                                          <b>Name:</b><br>
                                                            <input type="text" name="logoName" id="logoName"  onclick="disableKeyboardListner()" onfocusout="createKeyboardListner()">
                                                            <br><br>

                                                          <b>File Input:</b><br>
                                                            <input type="file" id="logoInput">
                                                            <br><br>
                                                          
                                                          <b>Width:</b><br> 
                                                          <input type="number" name="logoWidth" id="logoWidth" required>
                                                          <br><br> 
                                                          
                                                          <b>Height:</b><br> 
                                                          <input type="number" name="logoHeight" id="logoHeight" required>
                                                          <br><br>

                                                          <b>X location:</b><br> 
                                                          <input type="number" name="logoX" id="logoX" required>
                                                          <br><br>

                                                          <b>Y location:</b><br> 
                                                          <input type="number" name="logoY" id="logoY" required>
                                                          <br><br>

                                                          <b>Opacity:</b><br>
                                                          <div class="block">
                                                            <input type="range" name="logoOpacity" id="logoOpacity" min="0" max="1" value="1" step="0.1" list="logoMarkers"> 
                                                            <label id="logoOpacityValue"></label> 
                                                          </div>
                                                          <br>

                                                          <!-- Used to update the label to reflect what value you are at on the range -->
                                                          <script>
                                                            const logoOpacityOutput = document.getElementById("logoOpacityValue");
                                                            const logoOpacityInput = document.getElementById("logoOpacity");

                                                            //Have label display the starting value
                                                            logoOpacityOutput.innerText = logoOpacityInput.value;

                                                            // When you move to a diffrent value in the range update the label to current value
                                                            logoOpacityInput.addEventListener("input", (event) => {
                                                              logoOpacityOutput.innerText = event.target.value;
                                                            });

                                                            function editLogoAttributes(logoName) {
                                                              alert(logoName);
                                                            } 

                                                            function toggleLogoVisibility(logoName) {
                                                              alert('hide');
                                                              
                                                            }

                                                            function deleteLogo(logoName) {
                                                              alert('delete logo');
                                                            }

                                                          </script>

                                                          <!-- Used to add tick marks at every o.1 point -->
                                                          <datalist id="logoMarkers">
                                                            <option value="0"></option>
                                                            <option value="0.1"></option>
                                                            <option value="0.2"></option>
                                                            <option value="0.3"></option>
                                                            <option value="0.4"></option>
                                                            <option value="0.5"></option>
                                                            <option value="0.6"></option>
                                                            <option value="0.7"></option>
                                                            <option value="0.8"></option>
                                                            <option value="0.9"></option>
                                                            <option value="1"></option>
                                                          </datalist>

                                                          <!-- <b>Border Color:</b><br> 
                                                          <input type="color" name="logoBorderColor" id="logoBorderColor">
                                                          <br><br>
                                                          
                                                          <b>Border Width:</b><br> 
                                                          <input type="number" name="logoBorderWidth" id="logoBorderWidth">
                                                          <br><br> -->
                                                        <!-- </form> -->
                                                      </div>

                                                      <div class="modal-footer"> 
                                                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                          <!-- <button type="button" id="logoSubmit" class="btn btn-primary">Add Logo</button> -->

                                                          <button type="button" data-toggle="modal" data-target="#uploadLogoModal" class="btn btn-primary">
                                                            Save Changes
                                                          </button>
                    
                                                          <!-- Modal -->
                                                            <div class="modal fade" id="uploadLogoModal" tabindex="-1" role="dialog" aria-labelledby="uploadLogoModalLabel" aria-hidden="true">
                                                              <div class="modal-dialog modal-dialog-centered" role="document">
                                                                <div class="modal-content">
                                                                  <div class="modal-header">
                                                                    <h5 class="modal-title" id="uploadLogoModalLabel">Warning</h5>
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                      <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                  </div>
                                                                  <div class="modal-body">
                                                                    Before continuing, do you want to save your changes?
                                                                  </div>
                                                                  <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                                                                    <button type="button" class="btn btn-primary" id="logoSubmit" data-dismiss="modal">Yes</button>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                            </div>
                                                      </div>
                                                  </div>
                                                </div>
                                            </div>
                                            </div>
                                            <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                                              <div class="card-body">
                                                <table id="logoHierarchy">
                                                  <tr colspan="3" style="border: 1px solid black;">
                                                    <td style="border: 1px solid black;">Name</td>
                                                    <td style="border: 1px solid black;">Visibility</td>
                                                    <td style="border: 1px solid black;">Delete</td>
                                                  </tr>
                                                </table>
                                              </div>
                                            </div>
                                          </div>
                                          
                                          <!-- Heading two for the lyrics tab in the hierarchy -->
                                          <div class="card">
                                            <div class="card-header" id="headingTwo">
                                              <h5 class="mb-0">
                                                <button class="btn btn-link btn-sm collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                                  Lyrics
                                                </button>
                                                <input type="image" src="/EditorMedia/Plus.png" width="20" height="20" data-bs-toggle="modal" data-bs-target="#lyricsModal" id="lyricsPlusButton">
                                              </h5>

                                              <div class="modal fade" id="lyricsModal" tabindex="-1" aria-labelledby="lyricsModalLabel" aria-hidden="true">
                                                <div class="modal-dialog modal-lg">
                                                  <div class="modal-content">
                                                      <div class="modal-header">
                                                          <h5 class="modal-title" id="lyricsModalLabel">Add Properties of Lyrics</h5>
                                                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                      </div>
                                                      
                                                      <!-- add for the input -->
                                                      <!-- wait so this modal is properties? -->
                                                      <div class="modal-body"> 
                                                        
                                                        <!-- Input textfield for the lyrics -->
                                                          <b>Lyrics:</b><br>
                                                          <textarea id="lyricsTextArea" name="lyricsTextArea" rows="10" cols="99" placeholder="Enter your lyrics here"  onclick="disableKeyboardListner()" onfocusout="createKeyboardListner()"></textarea>
                                                          <br><br>

                                                          <b>Font Type: </b><br>
                                                          <!-- <input type="text" name="lyricFontType" id="lyricFontType" placeholder="Enter font-type name">  -->
                                                          <select name="lyricFontType" id="lyricFontType"> 
                                                            <option value="Arial">Arial</option>
                                                            <option value="Cambria">Cambria</option>
                                                            <option value="Courier New">Courier New</option>
                                                            <option value="Cursive">Cursive</option>
                                                            <option value="system-ui">Default</option>
                                                            <option value="Fantasy">Fantasy</option>
                                                            <option value="Franklin Gothic Medium">Franklin Gothic Medium</option>
                                                            <option value="Georgia">Georgia</option>
                                                            <option value="Gill Sans">Gill Sans</option>
                                                            <option value="Impact">Impact</option>
                                                            <option value="Lucida Sans">Lucida Sans</option>
                                                            <option value="Monospace">Monospace</option>
                                                            <option value="Sans-serif">Sans-serif</option>
                                                            <option value="Segoe UI">Segoe UI</option>
                                                            <option value="Serif">Seri</option>
                                                            <option value="Times New Roman">Times New Roman</option>
                                                            <option value="Trebuchet MS">Trebuchet MS</optionc>
                                                          </select>
                                                          <br><br>

                                                          <b>Font Size: </b><br>
                                                          <input type="number" name="lyricFontSize" id="lyricFontSize" placeholder="Enter font-size number">
                                                          <br><br>

                                                          <b>Font Color: </b><br>
                                                          <input type="color" name="lyricFontColor" id="lyricFontColor">
                                                          <br><br>

                                                          <b>Background Option: </b><br>
                                                          <input type="radio" name="lyricBackground" value="Disabled" onchange="lyricSelection();" checked> Disable
                                                          <input type="radio" name="lyricBackground" value="Enabled" onchange="lyricSelection();"> Enable
                                                          <br><br>

                                                          <div id="lyricBackgroundOption" style="display:none;">
                                                            <b>Background Color</b><br>
                                                            <input type="color" id="lyricbackgroundColor">
                                                            <br><br>
                                                          </div>
                                                          
                                                          <script>
                                                            function lyricSelection(){
                                                              var lyricBackgroundSelection = document.getElementsByName("lyricBackground");

                                                              //User selected the disabled button
                                                              if(lyricBackgroundSelection[0].checked)
                                                              {
                                                                document.getElementById("lyricBackgroundOption").style.setProperty("display", "none");
                                                              }
                                                              else //User selected enable
                                                              {
                                                                document.getElementById("lyricBackgroundOption").style.setProperty("display", "block");
                                                              }
                                                            }
                                                            
                                                            function hideLyricsPlusButton(){
                                                              
                                                              const lyricsPlusButton = document.getElementById("lyricsPlusButton");
                                                              // const currentDisplayValue = lyricsPlusButton.getAttribute("display");
                                                              // console.log(currentDisplayValue);
                                                              
                                                              lyricsPlusButton.style.setProperty("display", "none");
                                                              // if (currentDisplayValue == "none")
                                                              // {
                                                              //   lyricsPlusButton.style.setProperty("display", "block");
                                                              //   alert("show");
                                                              // }
                                                              // else if (currentDisplayValue === "block") {
                                                              //   lyricsPlusButton.style.setProperty("display", "none");
                                                              //   alert("hide");
                                                              // }
                                                            }
                                                          </script>
                                                      </div>

                                                      <div class="modal-footer"> 
                                                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                          <!-- <button type="button" id="lyricSubmit" class="btn btn-primary" data-bs-dismiss="modal" onclick = "hideLyricsPlusButton()">Add to Screen</button> -->

                                                          <button type="button" data-toggle="modal" data-target="#uploadLyricsModal" class="btn btn-primary">
                                                            Add to screen
                                                          </button>
                    
                                                          <!-- Modal -->
                                                            <div class="modal fade" id="uploadLyricsModal" tabindex="-1" role="dialog" aria-labelledby="uploadLyricsModalLabel" aria-hidden="true">
                                                              <div class="modal-dialog modal-dialog-centered" role="document">
                                                                <div class="modal-content">
                                                                  <div class="modal-header">
                                                                    <h5 class="modal-title" id="uploadLyricsModalLabel">Warning</h5>
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                      <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                  </div>
                                                                  <div class="modal-body">
                                                                    Before continuing, do you want to save your changes?
                                                                  </div>
                                                                  <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                                                                    <button type="button" class="btn btn-primary" id="lyricSubmit" onclick = "hideLyricsPlusButton()" data-dismiss="modal">Yes</button>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                            </div>

                                                      </div>
                                                  </div>
                                                </div>
                                            </div>
                                            </div>
                                            <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                                              <div class="card-body">
                                                Something with lyrics
                                              </div>
                                            </div>
                                          </div>
                                          
                                          <!-- Heading three for the design elements tab in the hierarchy -->
                                          <div class="card">
                                            <div class="card-header" id="headingThree">
                                              <h5 class="mb-0">                                              
                                                <!-- <input type="image" src="/EditorMedia/Plus.png" width="20" height="20" data-bs-toggle="modal" data-bs-target="#exampleModal"> -->
                                                <button class="btn btn-link btn-sm collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                                  Design Elements
                                                </button>
                                                <input type="image" src="/EditorMedia/Plus.png" width="20" height="20" data-bs-toggle="modal" data-bs-target="#exampleModal" id="designElementsPlusButton">
                                              </h5>
                                              
                                              <!-- Design Element Creation pop-up -->
                                              <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog modal-sm">
                                                  <div class="modal-content">
                                                      <div class="modal-header">
                                                          <h5 class="modal-title" id="exampleModalLabel">Add Properties of Rectangle</h5>
                                                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                      </div>
                                                      
                                                      <!-- add for the input -->
                                                      <!-- wait so this modal is properties? -->
                                                      <div class="modal-body"> 
                                                        <!-- <form name="properties" id="prop" action="#" onsubmit="createPolygon()"> -->
                                                          <!-- <button class="upload">
                                                            Upload Image
                                                          </button> -->

                                                          <b>Shape Type:</b><br>
                                                          <select name="shapeType" id="shapeType" onchange="shapeSelection();"> 
                                                            <option value="Rectangle">Rectangle</option>
                                                            <option value="Polygon">Polygon</option>
                                                          </select>
                                                          <br><br>
                                                          
                                                          <b>Name:</b><br>
                                                          <input type="text" name="shapeName" id="shapeName"  onclick="disableKeyboardListner()" onfocusout="createKeyboardListner()">
                                                          <br><br>
                                                          
                                                          <div id="PolygonOption" style="display:none;">
                                                            <b>Number of Sides: </b><br>
                                                            <input type="number" name="shapeSides" id="shapeSides" required>
                                                            <br><br>
                                                          </div>

                                                          <div id="Polygon&CircleOption" style="display:none;">
                                                            <b>Radius: </b><br>
                                                            <input type="number" name="shapeRadius" id="shapeRadius">
                                                            <br><br>
                                                          </div>
                                                          
                                                          <div id="RectangleOption">
                                                            <b>Width:</b><br>
                                                            <input type="number" name="shapeWidth" id="shapeWidth" required>
                                                            <br><br>

                                                            <b>Height:</b><br>
                                                            <input type="number" name="shapeHeight" id="shapeHeight">
                                                            <br><br>
                                                          </div>

                                                          <script>
                                                            function shapeSelection()
                                                            {
                                                              switch(document.getElementById("shapeType").value)
                                                              {
                                                                case "Rectangle":
                                                                  document.getElementById("PolygonOption").style.setProperty("display", "none");
                                                                  document.getElementById("Polygon&CircleOption").style.setProperty("display", "none");
                                                                  document.getElementById("RectangleOption").style.setProperty("display", "block");
                                                                  break;

                                                                case "Polygon":
                                                                  document.getElementById("PolygonOption").style.setProperty("display", "block");
                                                                  document.getElementById("Polygon&CircleOption").style.setProperty("display", "block");
                                                                  document.getElementById("RectangleOption").style.setProperty("display", "none");
                                                                  break;
                                                              }
                                                            }
                                                          </script>
                                                          
                                                          <b>Opacity:</b><br>
                                                          <div class="block">
                                                            <input type="range" name="shapeOpacity" id="shapeOpacity" min="0" max="1" value="1" step="0.1" list="markers"> 
                                                            <label id="shapeOpacityValue"></label> 
                                                          </div>
                                                          <br>

                                                          <!-- Used to update the label to reflect what value you are at on the range -->
                                                          <script>
                                                            const shapeOpacityOutput = document.getElementById("shapeOpacityValue");
                                                            const shapeOpacityInput = document.getElementById("shapeOpacity");

                                                            //Have label display the starting value
                                                            shapeOpacityOutput.innerText = shapeOpacityInput.value;

                                                            // When you move to a diffrent value in the range update the label to current value
                                                            shapeOpacityInput.addEventListener("input", (event) => {
                                                              shapeOpacityOutput.innerText = event.target.value;
                                                            });
                                                          </script>

                                                          <!-- Used to add tick marks at every o.1 point -->
                                                          <datalist id="markers">
                                                            <option value="0"></option>
                                                            <option value="0.1"></option>
                                                            <option value="0.2"></option>
                                                            <option value="0.3"></option>
                                                            <option value="0.4"></option>
                                                            <option value="0.5"></option>
                                                            <option value="0.6"></option>
                                                            <option value="0.7"></option>
                                                            <option value="0.8"></option>
                                                            <option value="0.9"></option>
                                                            <option value="1"></option>
                                                          </datalist>


                                                          <b>Fill Color:</b><br>
                                                          <input type="color" name="shapeFill" id="shapeFill">
                                                          <br><br>

                                                          <b>Border Color:</b><br>
                                                          <input type="color" name="shapeStroke" id="shapeStroke">
                                                          <br><br>

                                                          <b>Border Width:</b><br>
                                                          <input type="number" name="shapeStrokeWidth" id="shapeStrokeWidth">
                                                          <br><br>

                                                          <b>X location:</b><br>
                                                          <input type="number" name="shapeX" id="shapeX">
                                                          <br><br>

                                                          <b>Y location:</b><br>
                                                          <input type="number" name="shapeY" id="shapeY">
                                                          <br><br>

                                                          <b>Animation:</b><br>
                                                          <select name="shapeAnimation" id="shapeAnimation"> 
                                                            <option value="None">None</option>
                                                            <option value="Clockwise">Clockwise</option>
                                                            <option value="Counter-Clockwise">Counter-Clockwise</option>
                                                            <option value="Bouncing">Bouncing</option>
                                                            <option value="Circular">Circular</option>
                                                          </select>
                                                          <br><br>
                                                          
                                                          <b>Start Time:</b><br>
                                                          <input type="text" name="shapeStart-Time" id="shapeStart-Time" placeholder="Enter as 'mm:ss.s' ">
                                                          <br><br>

                                                          <b>End Time:</b><br>
                                                          <input type="text" name="shapeEnd-Time" id="shapeEnd-Time" placeholder="Enter as 'mm:ss.s'"> 
                                                          <br><br>                           
                                                        <!-- </form> -->
                                                      </div>

                                                      <div class="modal-footer"> 
                                                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                          <!-- <button type="button" id="shapeSubmit" class="btn btn-primary">Add to Screen</button> -->

                                                          <button type="button" data-toggle="modal" data-target="#uploadElementsModal" class="btn btn-primary">
                                                            Add to screen
                                                          </button>
                    
                                                          <!-- Modal -->
                                                            <div class="modal fade" id="uploadElementsModal" tabindex="-1" role="dialog" aria-labelledby="uploadElementsModalLabel" aria-hidden="true">
                                                              <div class="modal-dialog modal-dialog-centered" role="document">
                                                                <div class="modal-content">
                                                                  <div class="modal-header">
                                                                    <h5 class="modal-title" id="uploadLyricsModalLabel">Warning</h5>
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                      <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                  </div>
                                                                  <div class="modal-body">
                                                                    Before continuing, do you want to save your changes?
                                                                  </div>
                                                                  <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                                                                    <button type="button" class="btn btn-primary" id="shapeSubmit" data-dismiss="modal">Yes</button>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                            </div>

                                                      </div>
                                                  </div>
                                                </div>
                                            </div>
                                            <!-- End of the design element po -->
                                            </div>
                                            <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                                              <div class="card-body">
                                                <!-- to be added -->
                                                <table id="shapeHierarchy">
                                                  <tr colspan="3" style="border: 1px solid black;">
                                                    <td style="border: 1px solid black;">Name</td>
                                                    <td style="border: 1px solid black;">Visibility</td>
                                                    <td style="border: 1px solid black;">Delete</td>
                                                  </tr>
                                                </table>

                                                <!-- Functions to use with buttons in hierarchy table -->
                                                <script type="module">
                                                  import {requestSaveBackgroundChanges, requestDeleteBackground, requestShowEditBackgroundSection, requestSaveShapeChanges, showEditShapeSection,requestDeleteShape, requestShapeVisibility, createKeyboardListner, disableKeyboardListner} from "/EditorController.mjs";

                                                  //Functions for keypress
                                                  window.createKeyboardListner = createKeyboardListner;
                                                  window.disableKeyboardListner = disableKeyboardListner;

                                                  //Functions for background
                                                  window.requestShowEditBackgroundSection = requestShowEditBackgroundSection;
                                                  window.requestDeleteBackground = requestDeleteBackground;
                                                  window.requestSaveBackgroundChanges = requestSaveBackgroundChanges;

                                                  //Functions for shapes
                                                  window.requestDeleteShape = requestDeleteShape;
                                                  window.requestShapeVisibility = requestShapeVisibility;
                                                  window.showEditShapeSection = showEditShapeSection;
                                                  window.requestSaveShapeChanges = requestSaveShapeChanges;
                                                </script>                                            
                                              </div>
                                            </div>
                                          </div>

                                          <!-- Heading four for the background tab in the hierarchy -->
                                          <div class="card">
                                              <div class="card-header" id="headingFour">
                                                <h5 class="mb-0">
                                                  <button class="btn btn-link btn-sm collapsed" type="button" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                                    Background 
                                                  </button>
                                                  <input type="image" src="/EditorMedia/Plus.png" width="20" height="20" data-bs-toggle="modal" data-bs-target="#backModal" id="backgroundPlusButton">
                                                </h5>
                                                <div class="modal fade" id="backModal" tabindex="-1" aria-labelledby="backModalLabel" aria-hidden="true">
                                                  <div class="modal-dialog modal-sm">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="backModalLabel">Add Properties of Background</h5>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        
                                                        <!-- add for the input -->
                                                        <!-- wait so this modal is properties? -->
                                                        <div class="modal-body"> 
                                                          <!-- <form name="properties" id="prop" action="#" onsubmit="createPolygon()"> -->
                                                            <!-- <button class="upload">
                                                              Upload Image
                                                            </button> -->
                                                            
                                                            <b>File Input:</b><br>
                                                            <input type="file" id="imgInput">
                                                            <br><br>
                                                            
                                                            <b>Start Time: 00:00.0</b><br>
                                                            <input type="text" id="backgroundStart" name="backgroundStart" placeholder="00:00.0">
                                                            <br><br>

                                                            <!-- <b>End Time:</b><br>
                                                            <input type="text" id="backgroundEnd" name="backgroundEnd" placeholder="00:00.0">
                                                            <br><br> -->
                                                          <!-- </form> -->
                                                        </div>
    
                                                        <div class="modal-footer"> 
                                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                            <!-- <button type="button" id="fileSubmit" class="btn btn-primary">Add to Screen</button> -->

                                                            <button type="button" data-toggle="modal" data-target="#uploadFilesModal" class="btn btn-primary">
                                                              Add to screen
                                                            </button>
                      
                                                            <!-- Modal -->
                                                              <div class="modal fade" id="uploadFilesModal" tabindex="-1" role="dialog" aria-labelledby="uploadFilesModalLabel" aria-hidden="true">
                                                                <div class="modal-dialog modal-dialog-centered" role="document">
                                                                  <div class="modal-content">
                                                                    <div class="modal-header">
                                                                      <h5 class="modal-title" id="uploadFilesModalLabel">Warning</h5>
                                                                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                        <span aria-hidden="true">&times;</span>
                                                                      </button>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                      Before continuing, do you want to save your changes?
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                      <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                                                                      <button type="button" class="btn btn-primary" id="fileSubmit" data-dismiss="modal">Yes</button>
                                                                    </div>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                        </div>
                                                    </div>
                                                  </div>
                                              </div>
                                              </div>
                                              <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordionExample">
                                                <div class="card-body">
                                                  <table id="backgroundHierarchy" style="width: 30%;">
                                                    <tr colspan="3" style="border: 1px solid black;">
                                                      <td style="border: 1px solid black;">Name</td>
                                                      <td style="border: 1px solid black;">Visibility</td>
                                                      <td style="border: 1px solid black;">Delete</td>
                                                    </tr>
                                                  </table>
                                                </div>
                                              </div>
                                            </div>
                                        </div>
                                  </td>
                                
                                  <!-- Canvas Column -->
                                  <td id="CanvasColumn" style="width: 70%; background-color: lightslategray; border: rgb(83, 82, 82); border-style: solid; border-width: 2px;">
                                      <!-- <div id="KonvaCanvas" style="background-color: beige;">
                                        
                                      </div> -->
                                      <div id="CanvasWindow">
                                        <div id="BackgroundLayer">
                                          <img id="imageContent" onload="this.style.display='block'" onerror="this.style.display='none'">
                                          <video id="videoContent"></video>
                                        </div>
                                        <div id="KonvaCanvas" style="width: 100%; height: 100%;">
                                        </div>

                                        <!-- <div id="TextLayer">
                                          
                                        </div> -->

                                        <!-- Audio Element to play  -->
                                        <audio id="musicPlayer" preload="metadata">
                                          <source id="musicSrc" type="audio/mpeg">
                                        </audio>
                                      </div>
                                  </td>
                                  
                                  
                                  <!-- Properties Column -->
                                  <td class="propertiesPage" style="background-color: lightslategray; width: 15%; overflow-y: scroll; max-height: 500px;">
                                    <div id="editShapePopUp" style="display:none; max-height: 500px; width: 100%;"> 
                                      
                                      <h2 id="editHeader"></h2>

                                      <!-- Might not make name editable unless we can modify the name of the shape in the heirarchy -->
                                      <label>Shape Name:</label>
                                      <input type="text" id="editShapeName" placeholder="Enter Shape Name" onclick="disableKeyboardListner()" onfocusout="createKeyboardListner()"> 

                                      <!-- Might not use shape type -->

                                      <!--------------------- Edit Options for rectangle ---------------------->
                                      <!-- Shape Width -->
                                      <div id="editRectangleValues">
                                        <br><label for="editShapeWidth">Width:</label>
                                        <input type="number" id="editShapeWidth" placeholder="Enter Width">

                                        <!-- Shape Height -->
                                        <label for="editShapeHeight">Height:</label>
                                        <br><input type="number" id="editShapeHeight" placeholder="Enter Height">
                                      </div>
                                      <!-- ----------------------------------------------------------------- -->

                                      <!---------------------- Edit Options for Polygon------------------------->
                                      <div id="editPolygonValues">
                                        <br><label for="editShapeSides">Number of Sides:</label>
                                        <input type="number" id="editShapeSides" placeholder="Enter number of sides">
                                                          
                                        <br><label for="editShapeRadius">Radius:</label>
                                        <input type="number" id="editShapeRadius" placeholder="Enter the radius">
                                      </div>
                                      <!-- ------------------------------------------------------------------ -->

                                      <!-- Shape Color -->
                                      <br><label for="editShapeFill">Fill Color:</label>
                                      <input type="color" id="editShapeFill">

                                      <!-- Border Color-->
                                      <br><label for="editShapeStroke">Stroke Color:</label>
                                      <input type="color" id="editShapeStroke" placeholder="Enter a border color">

                                      <!-- Border Width -->
                                      <br><label for="editShapeStrokeWidth">Stroke Width:</label>
                                      <input type="number" id="editShapeStrokeWidth">

                                      <!-- Shape X location -->
                                      <br>
                                      <br><label for="editShapeX">X-Location:</label>
                                      <!-- <br> -->
                                      <input type="number" id="editShapeX" placeholder="Enter the X location">

                                      <!-- Shape Y location -->
                                      <!-- <br> -->
                                      <br><label for="editShapeY">Y-Location:</label>
                                      <br>
                                      <input type="number" id="editShapeY" placeholder="Enter the Y location">

                                      <!-- Shape animation *Note shapeType although used do determine what type of animation you chose eg. clockwise it is repurposed to hold konva.animation. May need to make a new attribute   -->

                                      <!-- Shape Opacity -->
                                      <label for="editShapeOpacity">Opacity:</label>
                                      <br><br><div class="block">
                                        <input type="range" id="editShapeOpacity" min="0" max="1" step="0.1">
                                        <label id="editShapeOpacityValue"></label>
                                      </div>

                                      <label for="editAnimationType">Animation Type: </label>
                                      <br><select name="editShapeAnimation" id="editShapeAnimation">
                                        <option value="None">None</option>
                                        <option value="Clockwise">Clockwise</option>
                                        <option value="Counter-Clockwise">Counter-Clockwise</option>
                                        <option value="Bouncing">Bouncing</option>
                                        <option value="Circular">Circular</option>
                                      </select>

                                      <!-- Start Time -->
                                      <br><br><label>Start Time:</label>
                                      <input type="text" id="editShapeStartTime" placeholder="Enter start time (00:00.0)">

                                      <!-- End time -->
                                      <br><br><label>End Time:</label>
                                      <input type="text" id="editShapeEndTime" placeholder="Enter end time (00:00.0)">
                                      
                                      <!-- Save Changes -->

                                      
                                      <br><br><button type="button" data-toggle="modal" data-target="#saveShapesModal">
                                        Save Changes
                                      </button>

                                      <!-- Modal -->
                                        <div class="modal fade" id="saveShapesModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                          <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content">
                                              <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLongTitle">Warning</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                  <span aria-hidden="true">&times;</span>
                                                </button>
                                              </div>
                                              <div class="modal-body">
                                                Before continuing, do you want to save your changes?
                                              </div>
                                              <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                <button type="button" class="btn btn-primary" id="saveChangeButton" data-dismiss="modal">Save changes</button>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      
                                    </div>

                                    <div id ="editBackgroundPopUp" style="display: none;">
                                      <!-- File Name -->
                                      <!-- <label></label> -->
                                      <!-- File Input -->
                                      <label>File Input:</label><br>
                                      <input type="file" style="width: 80%;" id="editFileInput"><br>
                                      <!-- Start Time -->
                                      <label>Start Time:</label><br>
                                      <input type="text" id="editStartTime"><br>
                                      <!-- Save background changes -->
                                      <br>
                                      <button type="button" data-toggle="modal" data-target="#saveFileModal" >
                                        Save Changes
                                      </button>

                                      <!-- Modal -->
                                        <div class="modal fade" id="saveFileModal" tabindex="-1" role="dialog" aria-labelledby="saveFileModalLabel" aria-hidden="true">
                                          <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content">
                                              <div class="modal-header">
                                                <h5 class="modal-title" id="saveFileModalLabel">Warning</h5>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                  <span aria-hidden="true">&times;</span>
                                                </button>
                                              </div>
                                              <div class="modal-body">
                                                Before continuing, do you want to save your changes?
                                              </div>
                                              <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                                                <button type="button" class="btn btn-primary" id="saveBackgroundButton" onclick="saveBackgroundChanges()" data-dismiss="modal">Yes</button>
                                              </div>
                                            </div>
                                          </div>
                                        </div>

                                    </div>

                                    <!-- Pulley Arrow and Square -->
                                    <!-- <div id="propertiesPulley" class="pulley">
                                      <div class="arrow"></div>
                                    </div> -->
                                  </td>
                          </tr>
                          <tr colspan="3">
                              <td style="width: 15%; background-color: #ecb5a2;">
                                Current Time:<span id="audioTimestamp" style="float: right;">00:00.0</span>
                              </td>
                              <td  style="text-align: center; background-color: #ecb5a2; width: 70%;">
                                <input class="slider" type="range" id="timeSlider" min="0" max="100" step="0.1" value="0" disabled />
                                <!-- <span id="audioTimestamp">00:00.0</span> -->
                              </td>

                              <td style="width: 15%; background-color: #ecb5a2;">
                                <span id="audioDuration" style="justify-content: left;"></span>
                              </td>

                              <!-- Calcuate the duration of the audio file -->
                              <script>
                                //Get the duartion of the audio
                                const audio = document.getElementById('musicPlayer');
                                  
                                //Calcuate duartion when metaData is ready
                                audio.onloadedmetadata = function() {
                                  console.log(audio.duration)
                                  
                                
                                //Calculate Mins
                                const min = Math.floor(audio.duration / 60);
                                
                                //Calculate Secs
                                const seconds = Math.floor(audio.duration % 60);

                                //Calcuate DeciSecs
                                const deciseconds = Math.floor((audio.duration * 10)) % 10;

                                //Display the clauclted timestamp to audioDuration
                                const maxTime = `${min.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}.${deciseconds.toString().padStart(1, '0')}`;
                                document.getElementById("audioDuration").innerText = maxTime;
                                }; 
                              </script>
                          </tr>
                      </tbody>
                  </table>
              </div>
            
        </div>

        
        <div class="overlap-2">
            <!-- <div class="top-bar"></div> -->
            <!-- bootstrap Navigation bar -->
            <nav class="navbar top-bar">
                <div class="container-fluid">
                    <div class="songcanvas-logo">
                        <div class="overlap-3">
<!-- Path to file-->                                
                            <img class="polygon" src="/mic_body.png" />
<!-- Path to file-->                                
                            <img class="img" src="/mic_head.png" />
                            <div class="rectangle-3"></div>
                            <div class="s-ngcanvas">S&nbsp;&nbsp;ngCanvas</div>
                        </div>
                    </div>
            </nav>    
            <!-- <img class="profile-picture" src="/images/Profile Picture.png" /> -->
            <nav class="navbar navbar-expand-xxxl"> 
                <!-- bg-body-tertiary -->
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <!-- Note
                    &nbsp; => one space
                    &ensp; => two space
                    &emsp; => four space -->

                <div class="collapse navbar-collapse" style="background-color: #ecb5a2;" id="navbarNavAltMarkup">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
<!-- Path to file-->                                
                            <a class="nav-link" href="#">
                                &emsp;About Us
<!-- Path to file-->                                    
                                <!-- <div class="hover-gif">                                        
                                    <img src="/images/music.gif" class="hover-gif-img">
                                </div> -->
                            </a>
                        </li>
                        <li class="nav-item">
<!-- Path to file-->                                
                            <a class="nav-link" href="#">&emsp;<img src="/navbar/question.png" class="mini-pic">&ensp;Q&A</a>
                        </li>
                        <li class="nav-item">
<!-- Path to file-->                                
                            <a class="nav-link" href="#">&emsp;<img src="/navbar/settings.png" class="mini-pic">&ensp;Settings</a>
                        </li>
                        <li class="nav-item">
<!-- Path to file-->                                
                            <a class="nav-link" href="/LoginViews/login.html">
                                &emsp;Log Out
                                <div class="hover-gif">
<!-- Path to file-->                                        
                                    <img src="/navbar/shrug-carrie-underwood.gif" class="hover-gif-img">
                                </div>
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" aria-current="page" href="#" data-bs-toggle="collapse" data-bs-target=".navbar-collapse.show">
<!-- Path to file-->                                    
                                <!-- <img src="/images/cancel.png" width="30" height="30">
                                <i class="bi bi-x" style="font-size: 20px;"></i> -->
                                &emsp;<button type="button" class="btn-close" aria-label="Close"></button>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>

</body>
</html>
